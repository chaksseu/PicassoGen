# PicassoGen: README.md

## Overview

PicassoGen is a novel text-to-image generation framework that addresses the challenges of generating images with detailed positional and object count constraints. By leveraging Large Language Model (LLM) agents and inpainting techniques, PicassoGen enhances the accuracy and coherence of generated images, ensuring they adhere to specific details provided in the textual prompts.


## Installation

1. **Clone the repository**:
    ```bash
    git clone https://github.com/chaksseu/PicassoGen.git
    cd PicassoGen
    ```

2. **Create a conda environment**:
    ```bash
    conda create -n picassogen python==3.9 -y
    conda activate picassogen
    ```

3. **Install dependencies**:
    ```bash
    pip install -r requirements.txt
    ```

4. **Set up environment variables**:
    - Copy the `.env.example` to `.env` and fill in the necessary details such as `OPENAI_API_KEY`.

## Usage

1. **Prepare a text prompt**:
    - You need a text prompt that describes the image you want to generate. For example:
      ```
      Draw two airplanes at the bottom and two UFOs at the top
      ```

2. **Run the main script**:
    ```bash
    python main.py --prompt "Draw two airplanes at the bottom and two UFOs at the top"
    ```

3. **Generated files**:
    - The generated masks and final images will be saved in the `results` directory.

## Components

### Agents

The LLM agents coordinate to interpret the prompt, generate positions, verify layouts, create background prompts, and finally generate and save the masks.

1. **User Proxy Agent**: Receives the initial text prompt and coordinates between other agents.
2. **Position Bot**: Generates layout information, including the position and size of each object.
3. **Position Verifier Bot**: Validates the layout generated by the Position Bot.
4. **Background Generation Bot**: Creates a background prompt based on the extracted information.
5. **Mask Generation Bot**: Generates mask images for the objects based on the layout information.

### Inpainting

The `Inpainter` class handles the inpainting process, creating detailed images based on the provided masks and prompts. It performs tasks such as generating background images, creating masks, and applying inpainting techniques to refine the final image.

### Configuration

Configuration settings are managed in the `configs` directory. Key settings include image dimensions, model names, and paths for storing images and masks.

### Utilities

Utility functions for tasks such as downloading images are located in the `utils` directory.

## Evaluation

The effectiveness of PicassoGen was evaluated using two primary metrics:

1. **Generative Numeracy**: Measures the accuracy of the number of objects generated compared to the prompt specifications.
2. **Spatial Reasoning**: Evaluates the correctness of the relative positions of the generated objects.


## References

Detailed references and further reading can be found in the project report and presentation.

For more information and detailed implementation, please refer to the project report and presentation available in the repository.


---

This README provides a comprehensive guide to understanding and utilizing PicassoGen, ensuring users can set up and run the framework efficiently.

