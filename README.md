# PicassoGen: Picture Assembler System using Stepwise Object Arrangement

## Overview

PicassoGen is a novel text-to-image generation framework that addresses the challenges of generating images with detailed positional and object count constraints. By leveraging Large Language Model (LLM) agents and inpainting techniques, PicassoGen enhances the accuracy and coherence of generated images, ensuring they adhere to specific details provided in the textual prompts.

## Installation

1. **Clone the repository**:
    ```bash
    git clone https://github.com/chaksseu/PicassoGen.git
    cd PicassoGen
    ```

2. **Create a conda environment**:
    ```bash
    conda create -n picassogen python==3.9 -y
    conda activate picassogen
    ```

3. **Install dependencies**:
    ```bash
    pip install -r requirements.txt
    ```

4. **Set up environment variables (OpenAI API key)**:
    - Make `.env` file and add your `OPENAI_API_KEY` in there.
      - OPENAI_API_KEY = "YOUR API KEY"
    - Add your API key in the `/configs/OAI_CONFIG_LIST_4o.json` file

## Usage

1. **Prepare a text prompt**:
    - You need a text prompt that describes the image you want to generate. For example:
      ```
      "Draw one panda on the left side and 2 mokeys on the right side."
      ```

2. **Run the main script**:
    ```bash
    python main.py --prompt "Draw one panda on the left side and 2 mokeys on the right side."
    ```

3. **Generated files**:
    - The generated masks and final images will be saved in the `results` directory.

## Components

### Agents

The `LLM agents` coordinate to interpret the prompt, generate positions, verify layouts, create background prompts, and finally generate and save the masks. We use the AutoGen framework for this part. (We used GPT-4o for LLM agents.)

1. **User Proxy Agent**: Receives the initial text prompt and coordinates between other agents.
2. **Position Bot**: Generates layout information, including the position and size of each object.
3. **Position Verifier Bot**: Validates the layout generated by the Position Bot.
4. **Background Generation Bot**: Creates a background prompt based on the extracted information.
5. **Mask Generation Bot**: Generates mask images for the objects based on the layout information.

### Inpainting

The `Inpainter` class handles the inpainting process, creating detailed images based on the provided masks and prompts. It performs tasks such as generating background images, creating masks, and applying inpainting techniques to refine the final image. (We used DALL-E2 for inpainting.)

### Configuration

Configuration settings are managed in the `configs` directory. Key settings include image dimensions, model names, and paths for storing images and masks.


---

### Contributors üë©‚Äçüíªüë®‚Äçüíª

<a href="https://github.com/chaksseu"><img src="https://img.shields.io/badge/chaksseu-black?style=social-square&logo=github&logoColor=white"/></a>
<a href="https://github.com/csjihwanh"><img src="https://img.shields.io/badge/csjihwanh-black?style=social-square&logo=github&logoColor=white"/></a>
<a href="https://github.com/xwsa568"><img src="https://img.shields.io/badge/xwsa568-black?style=social-square&logo=github&logoColor=white"/></a>


<a href="https://github.com/chaksseu"><img src="https://img.shields.io/badge/chaksseu-black?style=social-square&logo=github&logoColor=white"/></a>
<a href="https://github.com/csjihwanh"><img src="https://img.shields.io/badge/csjihwanh-black?style=social-square&logo=github&logoColor=white"/></a>
<a href="https://github.com/xwsa568"><img src="https://img.shields.io/badge/xwsa568-black?style=social-square&logo=github&logoColor=white"/></a>

